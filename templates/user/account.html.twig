{% extends 'base.html.twig' %}

{% block title %}{{parent()}}Mon compte{% endblock %}

{% block body %}
<div class="container-fluid">
	<h1 class="text-center text-primary mt-4 pt-4 display-1 fw-bold">Mon compte</h1>

	<div class="row justify-content-center">
		<div class="col-12 col-md-8 bg-white p-4 m-0 text-primary">
			<div class="table-responsive">
				<table class="table table-hover">
					<tr>
						<th scope="row" class="fw-bold text-secondary">Email</th>
						<td>{{user.email | lower}}</td>
					</tr>
					<tr>
						<th scope="row" class="fw-bold text-secondary">Prénom</th>
						<td>{{user.name | capitalize}}</td>
					</tr>
					<tr>
						<th scope="row" class="fw-bold text-secondary">Nom</th>
						<td>{{user.surname | upper}}</td>
					</tr>
					<tr>
						<th scope="row" class="fw-bold text-secondary">Date d'inscription</th>
						<td>{{user.registrationDate | date("d-m-Y à H:i:s")}}</td>
					</tr>
					<tr>
						<th scope="row" class="fw-bold text-secondary">Rôle</th>
						{% if "ROLE_ADMIN" in user.roles %}
                            <td>Administrateur</td>
                        {% elseif "ROLE_MOD" in user.roles %}
                            <td>Modérateur</td>
                        {% else %}
                            <td>Utilisateur</td>
                        {% endif %}
					</tr>
				</table>

				{% if user.files | length > 0 %}
                    {% for file in user.files %}
                        <tr>
                            <td class="text-center">
                                <fieldset>
                                    <legend><i class="bi bi-filetype-pdf"></i><a href="{{path('app_download',{'id':file.id})}}" style="text-decoration: none">{{file.originalName}}</a></legend>
                                    <ul class="text-secondary" style="list-style: none">
                                        {% for s in file.subcategories %}
                                            <li>{{s.number}}) {{s.label | capitalize}}</li>
                                        {% endfor %}
                                    </ul>
                                </fieldset>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td class="text-center">Aucun fichier</td>
                    </tr>
                {% endif %}
				
			</div>
		</div>
	</div>
</div>	
{% endblock %}